import{a as me,c as ge,d as pe,e as be,h as ve,i as ye,j as Ie,l as Ae,n as Ee}from"./chunk-DY57NLDM.js";import{e as Te,g as Oe}from"./chunk-NUQLUWPP.js";import{a as _,b as Me}from"./chunk-B6KBHQEU.js";import{h as _e,k as fe}from"./chunk-6BPL42WG.js";import{$a as g,B as q,Bb as ue,Ia as w,Ja as te,K as A,L as Q,La as E,M as p,Ma as b,N as X,Na as v,Oa as ie,P as J,Va as L,W as u,Y as ee,_ as k,_a as se,a as z,ab as ne,bb as N,db as S,eb as oe,f as l,hb as re,jb as ae,kb as ce,mb as R,o as y,pb as le,rb as de,sb as he,t as Y,va as F,w as x,x as I,za as m}from"./chunk-L2WTUD5P.js";import{c as D,d as G,e as $}from"./chunk-GANLAYMA.js";function d(a,...i){return i.length?i.some(n=>a[n]):a.altKey||a.shiftKey||a.ctrlKey||a.metaKey}var P=class{constructor(i){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new l,this._typeaheadSubscription=z.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new l,this.change=new l,i instanceof R&&(this._itemChangesSubscription=i.changes.subscribe(n=>{if(this._activeItem){let t=n.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(X(n=>this._pressedLetters.push(n)),q(i),I(()=>this._pressedLetters.length>0),y(()=>this._pressedLetters.join(""))).subscribe(n=>{let e=this._getItemsArray();for(let t=1;t<e.length+1;t++){let s=(this._activeItemIndex+t)%e.length,o=e[s];if(!this._skipPredicateFn(o)&&o.getLabel().toUpperCase().trim().indexOf(n)===0){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,n=10){return this._pageUpAndDown={enabled:i,delta:n},this}setActiveItem(i){let n=this._activeItem;this.updateActiveItem(i),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(i){let n=i.keyCode,t=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!i[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&t){this.setNextItemActive();break}else return;case 38:if(this._vertical&&t){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&t){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&t){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&t){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&t){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&t){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&t){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(t||d(i,"shiftKey"))&&(i.key&&i.key.length===1?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n)));return}this._pressedLetters=[],i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){let n=this._getItemsArray(),e=typeof i=="number"?i:n.indexOf(i),t=n[e];this._activeItem=t??null,this._activeItemIndex=e}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){let n=this._getItemsArray();for(let e=1;e<=n.length;e++){let t=(this._activeItemIndex+i*e+n.length)%n.length,s=n[t];if(!this._skipPredicateFn(s)){this.setActiveItem(t);return}}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,n){let e=this._getItemsArray();if(e[i]){for(;this._skipPredicateFn(e[i]);)if(i+=n,!e[i])return;this.setActiveItem(i)}}_getItemsArray(){return this._items instanceof R?this._items.toArray():this._items}},M=class extends P{setActiveItem(i){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(i),this.activeItem&&this.activeItem.setActiveStyles()}};var xe=0,W=class extends Te{constructor(i=!1,n,e=!0,t){super(!0,n,e,t),this.multiple=i}isMultipleSelection(){return this.multiple}select(...i){return this.multiple?super.select(...i):super.setSelection(...i)}},H=(()=>{let i=class{constructor(){this._generatedId=`cdk-option-${xe++}`,this._disabled=!1,this.element=u(F).nativeElement,this.listbox=u(Z),this.destroyed=new l,this._clicked=new l}get id(){return this._id||this._generatedId}set id(e){this._id=e}get disabled(){return this.listbox.disabled||this._disabled}set disabled(e){this._disabled=_(e)}get enabledTabIndex(){return this._enabledTabIndex===void 0?this.listbox.enabledTabIndex:this._enabledTabIndex}set enabledTabIndex(e){this._enabledTabIndex=e}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}isSelected(){return this.listbox.isSelected(this)}isActive(){return this.listbox.isActive(this)}toggle(){this.listbox.toggle(this)}select(){this.listbox.select(this)}deselect(){this.listbox.deselect(this)}focus(){this.element.focus()}getLabel(){return(this.typeaheadLabel??this.element.textContent?.trim())||""}setActiveStyles(){}setInactiveStyles(){}_handleFocus(){this.listbox.useActiveDescendant&&(this.listbox._setActiveOption(this),this.listbox.focus())}_getTabIndex(){return this.listbox.useActiveDescendant||this.disabled?-1:this.isActive()?this.enabledTabIndex:-1}},a=i;return(()=>{i.\u0275fac=function(t){return new(t||i)}})(),(()=>{i.\u0275dir=k({type:i,selectors:[["","cdkOption",""]],hostAttrs:["role","option",1,"cdk-option"],hostVars:6,hostBindings:function(t,s){t&1&&L("click",function(r){return s._clicked.next(r)})("focus",function(){return s._handleFocus()}),t&2&&(S("id",s.id),w("aria-selected",s.isSelected())("tabindex",s._getTabIndex())("aria-disabled",s.disabled),se("cdk-option-active",s.isActive()))},inputs:{id:"id",value:["cdkOption","value"],typeaheadLabel:["cdkOptionTypeaheadLabel","typeaheadLabel"],disabled:["cdkOptionDisabled","disabled"],enabledTabIndex:["tabindex","enabledTabIndex"]},exportAs:["cdkOption"],standalone:!0})})(),a})(),Z=(()=>{let i=class{constructor(){this._generatedId=`cdk-listbox-${xe++}`,this._disabled=!1,this._useActiveDescendant=!1,this._orientation="vertical",this._navigationWrapDisabled=!1,this._navigateDisabledOptions=!1,this.valueChange=new l,this.selectionModel=new W,this.destroyed=new l,this.element=u(F).nativeElement,this.changeDetectorRef=u(ue),this._invalid=!1,this._lastTriggered=null,this._onTouched=()=>{},this._onChange=()=>{},this._optionClicked=Y(()=>this.options.changes.pipe(A(this.options),Q(e=>x(...e.map(t=>t._clicked.pipe(y(s=>({option:t,event:s})))))))),this._dir=u(Oe,{optional:!0}),this._skipDisabledPredicate=e=>e.disabled,this._skipNonePredicate=()=>!1,this._hasFocus=!1}get id(){return this._id||this._generatedId}set id(e){this._id=e}get enabledTabIndex(){return this._enabledTabIndex===void 0?0:this._enabledTabIndex}set enabledTabIndex(e){this._enabledTabIndex=e}get value(){return this._invalid?[]:this.selectionModel.selected}set value(e){this._setSelection(e)}get multiple(){return this.selectionModel.multiple}set multiple(e){this.selectionModel.multiple=_(e),this.options&&this._updateInternalValue()}get disabled(){return this._disabled}set disabled(e){this._disabled=_(e)}get useActiveDescendant(){return this._useActiveDescendant}set useActiveDescendant(e){this._useActiveDescendant=_(e)}get orientation(){return this._orientation}set orientation(e){this._orientation=e==="horizontal"?"horizontal":"vertical",e==="horizontal"?this.listKeyManager?.withHorizontalOrientation(this._dir?.value||"ltr"):this.listKeyManager?.withVerticalOrientation()}get compareWith(){return this.selectionModel.compareWith}set compareWith(e){this.selectionModel.compareWith=e}get navigationWrapDisabled(){return this._navigationWrapDisabled}set navigationWrapDisabled(e){this._navigationWrapDisabled=_(e),this.listKeyManager?.withWrap(!this._navigationWrapDisabled)}get navigateDisabledOptions(){return this._navigateDisabledOptions}set navigateDisabledOptions(e){this._navigateDisabledOptions=_(e),this.listKeyManager?.skipPredicate(this._navigateDisabledOptions?this._skipNonePredicate:this._skipDisabledPredicate)}ngAfterContentInit(){this._initKeyManager(),x(this.selectionModel.changed,this.options.changes).pipe(A(null),p(this.destroyed)).subscribe(()=>this._updateInternalValue()),this._optionClicked.pipe(I(({option:e})=>!e.disabled),p(this.destroyed)).subscribe(({option:e,event:t})=>this._handleOptionClicked(e,t))}ngOnDestroy(){this.listKeyManager?.destroy(),this.destroyed.next(),this.destroyed.complete()}toggle(e){this.toggleValue(e.value)}toggleValue(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.toggle(e)}select(e){this.selectValue(e.value)}selectValue(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.select(e)}deselect(e){this.deselectValue(e.value)}deselectValue(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.deselect(e)}setAllSelected(e){e?(this._invalid&&this.selectionModel.clear(!1),this.selectionModel.select(...this.options.map(t=>t.value))):this.selectionModel.clear()}isSelected(e){return this.isValueSelected(e.value)}isActive(e){return this.listKeyManager?.activeItem===e}isValueSelected(e){return this._invalid?!1:this.selectionModel.isSelected(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){this._setSelection(e),this._verifyOptionValues()}setDisabledState(e){this.disabled=e}focus(){this.element.focus()}triggerOption(e){e&&!e.disabled&&(this._lastTriggered=e,(this.multiple?this.selectionModel.toggle(e.value):this.selectionModel.select(e.value))&&(this._onChange(this.value),this.valueChange.next({value:this.value,listbox:this,option:e})))}triggerRange(e,t,s,o){if(this.disabled||e&&e.disabled)return;this._lastTriggered=e;let r=this.compareWith??Object.is,c=[...this.options].slice(Math.max(0,Math.min(t,s)),Math.min(this.options.length,Math.max(t,s)+1)).filter(f=>!f.disabled).map(f=>f.value),h=[...this.value];for(let f of c){let C=h.findIndex(ke=>r(ke,f));o&&C===-1?h.push(f):!o&&C!==-1&&h.splice(C,1)}this.selectionModel.setSelection(...h)&&(this._onChange(this.value),this.valueChange.next({value:this.value,listbox:this,option:e}))}_setActiveOption(e){this.listKeyManager.setActiveItem(e)}_handleFocus(){this.useActiveDescendant||(this.selectionModel.selected.length>0?this._setNextFocusToSelectedOption():this.listKeyManager.setNextItemActive(),this._focusActiveOption())}_handleKeydown(e){if(this._disabled)return;let{keyCode:t}=e,s=this.listKeyManager.activeItemIndex,o=["ctrlKey","metaKey"];if(this.multiple&&t===65&&d(e,...o)){this.triggerRange(null,0,this.options.length-1,this.options.length!==this.value.length),e.preventDefault();return}if(this.multiple&&(t===32||t===13)&&d(e,"shiftKey")){this.listKeyManager.activeItem&&this.listKeyManager.activeItemIndex!=null&&this.triggerRange(this.listKeyManager.activeItem,this._getLastTriggeredIndex()??this.listKeyManager.activeItemIndex,this.listKeyManager.activeItemIndex,!this.listKeyManager.activeItem.isSelected()),e.preventDefault();return}if(this.multiple&&t===36&&d(e,...o)&&d(e,"shiftKey")){let c=this.listKeyManager.activeItem;if(c){let h=this.listKeyManager.activeItemIndex;this.listKeyManager.setFirstItemActive(),this.triggerRange(c,h,this.listKeyManager.activeItemIndex,!c.isSelected())}e.preventDefault();return}if(this.multiple&&t===35&&d(e,...o)&&d(e,"shiftKey")){let c=this.listKeyManager.activeItem;if(c){let h=this.listKeyManager.activeItemIndex;this.listKeyManager.setLastItemActive(),this.triggerRange(c,h,this.listKeyManager.activeItemIndex,!c.isSelected())}e.preventDefault();return}if(t===32||t===13){this.triggerOption(this.listKeyManager.activeItem),e.preventDefault();return}let r=t===38||t===40||t===37||t===39||t===36||t===35;this.listKeyManager.onKeydown(e),r&&e.shiftKey&&s!==this.listKeyManager.activeItemIndex&&this.triggerOption(this.listKeyManager.activeItem)}_handleFocusIn(){this._hasFocus=!0}_handleFocusOut(e){let t=e.relatedTarget;this.element!==t&&!this.element.contains(t)&&(this._onTouched(),this._hasFocus=!1,this._setNextFocusToSelectedOption())}_getAriaActiveDescendant(){return this._useActiveDescendant?this.listKeyManager?.activeItem?.id:null}_getTabIndex(){return this.disabled?-1:this.useActiveDescendant||!this.listKeyManager.activeItem?this.enabledTabIndex:-1}_initKeyManager(){this.listKeyManager=new M(this.options).withWrap(!this._navigationWrapDisabled).withTypeAhead().withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._navigateDisabledOptions?this._skipNonePredicate:this._skipDisabledPredicate),this.orientation==="vertical"?this.listKeyManager.withVerticalOrientation():this.listKeyManager.withHorizontalOrientation(this._dir?.value||"ltr"),this.selectionModel.selected.length&&Promise.resolve().then(()=>this._setNextFocusToSelectedOption()),this.listKeyManager.change.subscribe(()=>this._focusActiveOption())}_focusActiveOption(){this.useActiveDescendant||this.listKeyManager.activeItem?.focus(),this.changeDetectorRef.markForCheck()}_setSelection(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.setSelection(...this._coerceValue(e)),this._hasFocus||this._setNextFocusToSelectedOption()}_setNextFocusToSelectedOption(){let e=this.options?.find(t=>t.isSelected());e&&this.listKeyManager.updateActiveItem(e)}_updateInternalValue(){let e=new Map;this.selectionModel.sort((s,o)=>{let r=this._getIndexForValue(e,s),c=this._getIndexForValue(e,o);return r-c});let t=this.selectionModel.selected;this._invalid=!this.multiple&&t.length>1||!!this._getInvalidOptionValues(t).length,this.changeDetectorRef.markForCheck()}_getIndexForValue(e,t){let s=this.compareWith||Object.is;if(!e.has(t)){let o=-1;for(let r=0;r<this.options.length;r++)if(s(t,this.options.get(r).value)){o=r;break}e.set(t,o)}return e.get(t)}_handleOptionClicked(e,t){t.preventDefault(),this.listKeyManager.setActiveItem(e),t.shiftKey&&this.multiple?this.triggerRange(e,this._getLastTriggeredIndex()??this.listKeyManager.activeItemIndex,this.listKeyManager.activeItemIndex,!e.isSelected()):this.triggerOption(e)}_verifyNoOptionValueCollisions(){this.options.changes.pipe(A(this.options),p(this.destroyed)).subscribe(()=>{let e=this.compareWith??Object.is;for(let t=0;t<this.options.length;t++){let s=this.options.get(t),o=null;for(let r=t+1;r<this.options.length;r++){let c=this.options.get(r);if(e(s.value,c.value)){o=c;break}}if(o){this.compareWith?console.warn("Found multiple CdkOption representing the same value under the given compareWith function",{option1:s.element,option2:o.element,compareWith:this.compareWith}):console.warn("Found multiple CdkOption with the same value",{option1:s.element,option2:o.element});return}}})}_verifyOptionValues(){this.options}_coerceValue(e){return e==null?[]:Me(e)}_getInvalidOptionValues(e){let t=this.compareWith||Object.is,s=(this.options||[]).map(o=>o.value);return e.filter(o=>!s.some(r=>t(o,r)))}_getLastTriggeredIndex(){let e=this.options.toArray().indexOf(this._lastTriggered);return e===-1?null:e}},a=i;return(()=>{i.\u0275fac=function(t){return new(t||i)}})(),(()=>{i.\u0275dir=k({type:i,selectors:[["","cdkListbox",""]],contentQueries:function(t,s,o){if(t&1&&de(o,H,5),t&2){let r;le(r=he())&&(s.options=r)}},hostAttrs:["role","listbox",1,"cdk-listbox"],hostVars:6,hostBindings:function(t,s){t&1&&L("focus",function(){return s._handleFocus()})("keydown",function(r){return s._handleKeydown(r)})("focusout",function(r){return s._handleFocusOut(r)})("focusin",function(){return s._handleFocusIn()}),t&2&&(S("id",s.id),w("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("aria-multiselectable",s.multiple)("aria-activedescendant",s._getAriaActiveDescendant())("aria-orientation",s.orientation))},inputs:{id:"id",enabledTabIndex:["tabindex","enabledTabIndex"],value:["cdkListboxValue","value"],multiple:["cdkListboxMultiple","multiple"],disabled:["cdkListboxDisabled","disabled"],useActiveDescendant:["cdkListboxUseActiveDescendant","useActiveDescendant"],orientation:["cdkListboxOrientation","orientation"],compareWith:["cdkListboxCompareWith","compareWith"],navigationWrapDisabled:["cdkListboxNavigationWrapDisabled","navigationWrapDisabled"],navigateDisabledOptions:["cdkListboxNavigatesDisabledOptions","navigateDisabledOptions"]},outputs:{valueChange:"cdkListboxValueChange"},exportAs:["cdkListbox"],standalone:!0,features:[oe([{provide:me,useExisting:J(()=>i),multi:!0}])]})})(),a})();function Ke(a,i){if(a&1&&(b(0,"li",4),g(1),v()),a&2){let n=i.$implicit;E("cdkOption",n.id),m(1),ne(n.label)}}var St=(()=>{var i;let n=class{constructor(){G(this,i,void 0);$(this,i,new Ae().nonNullable),this.form=D(this,i).group({languages:D(this,i).control(["italian"],[ge.required])}),this.languages=[{id:"chinese",label:"Chinese"},{id:"french",label:"French"},{id:"italian",label:"Italian"},{id:"japanese",label:"Japanese"}]}},a=n;return i=new WeakMap,(()=>{n.\u0275fac=function(s){return new(s||n)}})(),(()=>{n.\u0275cmp=ee({type:n,selectors:[["cdk-list-box-demo"]],standalone:!0,features:[re],decls:11,vars:6,consts:[["id","example-fav-cuisine-label",1,"example-listbox-label"],[3,"formGroup"],["cdkListbox","","cdkListboxMultiple","","formControlName","languages","aria-labelledby","example-fav-cuisine-label",1,"example-listbox"],["class","example-option",3,"cdkOption",4,"ngFor","ngForOf"],[1,"example-option",3,"cdkOption"]],template:function(s,o){s&1&&(b(0,"h3"),g(1,"CDK List Box"),v(),b(2,"label",0),g(3," Favorite languages "),v(),b(4,"form",1)(5,"ul",2),te(6,Ke,2,2,"li",3),v()(),g(7),ae(8,"json"),ie(9,"br"),g(10)),s&2&&(m(4),E("formGroup",o.form),m(2),E("ngForOf",o.languages),m(1),N(" Value: ",ce(8,4,o.form.value)," "),m(3),N(" Valid: ",o.form.valid," "))},dependencies:[Z,H,Ee,ve,pe,be,ye,Ie,fe,_e],styles:[`.example-listbox-container[_ngcontent-%COMP%]{display:block;width:250px;border:1px solid black}.example-listbox-label[_ngcontent-%COMP%]{display:block;padding:5px}.example-listbox[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.example-option[_ngcontent-%COMP%]{position:relative;padding:5px 5px 5px 25px}.example-option[aria-selected=true][_ngcontent-%COMP%]:before{content:"";display:block;width:20px;height:20px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m9.55 18-5.7-5.7 1.425-1.425L9.55 15.15l9.175-9.175L20.15 7.4Z"/></svg>');background-size:cover;position:absolute;left:2px}.example-option[_ngcontent-%COMP%]:focus{background:rgba(0,0,0,.2)}`]})})(),a})();export{St as default};
