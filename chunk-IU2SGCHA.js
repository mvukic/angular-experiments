import{a as g,h as S,o as p}from"./chunk-JU74H7II.js";import{d as f}from"./chunk-KCZLJE3N.js";import{Ba as u,R as c,S as d,V as o,Z as h,c as _,f as a,j as m,v,x as w,y as l}from"./chunk-B5SO3BJU.js";var b=20,ge=(()=>{let i=class i{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=b){return this._platform.isBrowser?new _(t=>{this._globalSubscription||this._addGlobalListener();let n=e>0?this._scrolled.pipe(l(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):m()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(w(s=>!s||n.indexOf(s)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((n,s)=>{this._scrollableContainsElement(s,e)&&t.push(s)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=S(t),s=e.getElementRef().nativeElement;do if(n==s)return!0;while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return v(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};i.\u0275fac=function(t){return new(t||i)(o(u),o(g),o(f,8))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var x=20,pe=(()=>{let i=class i{constructor(e,t,n){this._platform=e,this._change=new a,this._changeListener=s=>{this._change.next(s)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),n=e.documentElement,s=n.getBoundingClientRect(),R=-s.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,y=-s.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0;return{top:R,left:y}}change(e=x){return e>0?this._change.pipe(l(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}};i.\u0275fac=function(t){return new(t||i)(o(g),o(u),o(f,8))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var C=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=h({type:i}),i.\u0275inj=d({});let r=i;return r})(),_e=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=h({type:i}),i.\u0275inj=d({imports:[p,C,p,C]});let r=i;return r})();export{ge as a,pe as b,_e as c};
